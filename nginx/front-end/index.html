<html>
  <head>
    <title>Front End</title>
  </head>
  <body>
    <h1>Front End</h1>
    <p>This is the front end.</p>
    <script>
      async function sendRequests() {
        const requests = [];
        for (let i = 0; i < 10; i++) {
          const request = fetch(`/django/workload/async-sleep?${i}`, { method: "GET" })
            .then((response) => {
              console.log(response.status);
              const p = document.createElement("p");
              p.textContent = `Request ${i + 1} is completed: ${
                response.status
              }`;
              p.setAttribute("aria-label", `Request ${i + 1}`);
              document.body.appendChild(p);
            })
            .catch((error) =>
              console.error(`requet ${i + 1} is error:`, error)
            );
          requests.push(request);
        }

        const responses = await Promise.all(requests);
        console.log("completed");
        const h2 = document.createElement("h2");
        h2.textContent = "Completed requests";
        h2.setAttribute("aria-label", "Completed");
        document.body.appendChild(h2);
      }
      sendRequests();
    </script>
  </body>
</html>
